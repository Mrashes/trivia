<!DOCTYPE html>
<html>
<head>
	<title>Trivia Game</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- Latest compiled and minified CSS & JS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
	<script src="assets/js/jquery.js"></script>
</head>
<body>
	<div class="container">
		<div class="jumbotron">
			<h1 class="text-center"><strong>Trivia</strong></h1>
			<h4 class="text-center">To cross the otherside you see, you must answer questions 3</h4>
		</div>

		<div class="row" id="winScreen">
			<div class="col-lg-5" >
				<div class="row">
					<h3 class="text-center">Question</h3>
				</div>
				<!-- Question -->
				<div id="question" class="question">
					<button class="center-block btn btn-danger" id="vg">Video Games</button>
					<button class="center-block btn btn-danger" id="ot">Other Topic</button>
				</div>
			</div>
			<div class="col-lg-7">
				<!-- Answers -->
				<div class="panel panel-default">
					<div class="panel-body text-center" id="answer1">
						Answer 1
					</div>
				</div>
				<div class="panel panel-default">
					<div class="panel-body text-center" id="answer2">
						Answer2
					</div>
				</div>
				<div class="panel panel-default">
					<div class="panel-body text-center" id="answer3">
						Answer 3
					</div>
				</div>
				<div class="panel panel-default">
					<div class="panel-body text-center" id="answer4">
						Answer 4
					</div>
				</div>
				<div >
					<div class="panel panel-default">
						<div class="panel-body text-center" id="timer">
							timer
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>


	<script type="text/javascript">
		var trivia = {
			//storage of questions.  Its an array so questions[x] is which question you have.
			questions:  [
				//video games/first topic
				[
				{
					question: "Which of these games star a bear and a bird",
					answers: ["Banjo-Kazooie", "Crash Bandicoot", "Street Fighter III", "Lion King",],
					right: "Banjo-Kazooie"
				},
				{
					question: "This dragon stared in a hit video game franchise",
					answers: ["Crash Bandicoot", "Spyro", "Lara Croft", "Solid Snake",],
					right: "Spyro"
				},
				{
					question: "Which system came first?",
					answers: ["Playstation", "Dreamcast", "Genesis", "Xbox",],
					right: "Playstation"
				},
				{
					question: "This company started as a playing card manufacturer",
					answers: ["Nintendo", "Sony", "Microsoft", "Sega",],
					right: "Nintendo"
				},
				{
					question: "This company created the game and watch handheld system",
					answers: ["Nintendo", "Sony", "Microsoft", "Sega",],
					right: "Nintendo"
				},
				{
					question: "This game series stars Nathan Drake",
					answers: ["Uncharted", "Dark Souls", "Pokemon", "Animal Crossing",],
					right: "Uncharted"
				},
				{
					question: "Who created the Legend of Zelda?",
					answers: ["Satoru Iwata", "David Cage", "Shigeru Miyamoto", "Yuji Naka",],
					right: "Shigeru Miyamoto"
				},
				{
					question: "Which company had the slogan \'Genesis does what Nintendon\'t\'?",
					answers: ["Oculus", "Sony", "Microsoft", "Sega",],
					right: "Sega"
				},
				{
					question: "Which system came first?",
					answers: ["Xbox 360", "Wii U", "PS4", "Oculus",],
					right: "Xbox 360"
				},
				{
					question: "This fighting game series is famous for line \'Finish Him\'",
					answers: ["Injustice", "Street Fighter", "Clay Fighter 63.5", "Mortal Kombat",],
					right: "Mortal Kombat"
				}
				],

				//second topic
				[{
					question: "Which of these games star a bear and a bird",
					answers: ["Banjo-Kazooie", "Crash Bandicoot", "Street Fighter III", "Lion King",],
					right: "Banjo-Kazooie"
				},
				{
					question: "This dragon stared in a hit video game franchise",
					answers: ["Crash Bandicoot", "Spyro", "Lara Croft", "Solid Snake",],
					right: "Spyro"
				},
				{
					question: "Which system came first?",
					answers: ["Playstation", "Dreamcast", "Genesis", "Xbox",],
					right: "Playstation"
				},
				{
					question: "This company started as a playing card manufacturer",
					answers: ["Nintendo", "Sony", "Microsoft", "Sega",],
					right: "Nintendo"
				},
				{
					question: "This company created the game and watch handheld system",
					answers: ["Nintendo", "Sony", "Microsoft", "Sega",],
					right: "Nintendo"
				},
				{
					question: "This game series stars Nathan Drake",
					answers: ["Uncharted", "Dark Souls", "Pokemon", "Animal Crossing",],
					right: "Uncharted"
				},
				{
					question: "Who created the Legend of Zelda?",
					answers: ["Satoru Iwata", "David Cage", "Shigeru Miyamoto", "Yuji Naka",],
					right: "Shigeru Miyamoto"
				},
				{
					question: "Which company had the slogan \'Genesis does what Nintendon\'t\'?",
					answers: ["Oculus", "Sony", "Microsoft", "Sega",],
					right: "Sega"
				},
				{
					question: "Which system came first?",
					answers: ["Xbox 360", "Wii U", "PS4", "Oculus",],
					right: "Xbox 360"
				},
				{
					question: "This fighting game series is famous for line \'Finish Him\'",
					answers: ["Injustice", "Street Fighter", "Clay Fighter 63.5", "Mortal Kombat",],
					right: "Mortal Kombat"
				}
				],
			],

			//declaration of variables

			usedQuestions: [],
			currentQuestion: "",
			timer: 10,
			score: 0,
			randomQ: [],
			referenceQ: [0,1,2,3],
			currentTopic: 0,

			//functions
			//random number generator (non-inclusive)
			randomNumber: function(min, max) {
				return Math.floor(Math.random() * (max - min)) + min;
			},

			//Draw new question
			newQuestion: function() {
				//choose which question
				trivia.currentQuestion = trivia.questions[trivia.currentTopic][trivia.randomNumber(0, trivia.questions[trivia.currentTopic].length)];
				if (trivia.currentQuestion.length === 0){
					alert("out of questions.  Sorry")
					console.log('newQuestion');
				}
				else {
					return trivia.currentQuestion
				}
			},

			printScore: function() {
				//on timer while I have the time taken out
				$('#timer').text(trivia.score);
			},

			//prints trivia question and answers
			printCurrentTrivia: function(){
				trivia.randomizeQuestion()
				$('#question').html("<h3 class=\"text-center\">" + trivia.currentQuestion.question + "</h3>");
				$('#answer1').text(trivia.currentQuestion.answers[trivia.randomQ[0]]);
				$('#answer2').text(trivia.currentQuestion.answers[trivia.randomQ[1]]);
				$('#answer3').text(trivia.currentQuestion.answers[trivia.randomQ[2]]);
				$('#answer4').text(trivia.currentQuestion.answers[trivia.randomQ[3]]);
			},

			//removes current question from the question pool
			removeQuestion: function() {
				trivia.usedQuestions.push(trivia.currentQuestion)
				trivia.questions[trivia.currentTopic].splice(trivia.questions[trivia.currentTopic].indexOf(trivia.currentQuestion), 1);		
			},

			nextQuestion: function() {
				if (trivia.questions[trivia.currentTopic].length > 0){
					trivia.newQuestion();
					trivia.printCurrentTrivia();
					trivia.printScore();
					trivia.removeQuestion();
					// trivia.printScore();
					// trivia.perSecond();
				}
				else {
					console.log("broke from next question");
					//have it create screen of score and time?
					trivia.winBoard()
				}
			},

			point: function() {
				trivia.score += 1;
			},

			randomizeQuestion: function() {
				trivia.randomQ = [];
				trivia.referenceQ = [0,1,2,3];
				for (var i=0; i<4; i++){
					var a = trivia.randomNumber(0, trivia.referenceQ.length);
					trivia.randomQ.push(trivia.referenceQ[a]);
					trivia.referenceQ.splice(a, 1);
				}
			},

			checkAnswer: function(answer) {
				if (answer == trivia.currentQuestion.right) {
					console.log("winner!");
					trivia.point();
					trivia.nextQuestion();
				}
				else {
					console.log("Wrong, next question")
					trivia.nextQuestion();
				}
			},

			winBoard: function() {
				$("#winScreen").html("<p class='text-center'>Congrats on finishing!  Your score was " + trivia.score + " out of " + trivia.usedQuestions.length + ".  Refresh to try again</p>")
			}

			// clock: function() {
			// 	trivia.timer -= 1
			// 	trivia.printTime()
				
			// 	if (trivia.timer <= 0) {
			// 		if (trivia.questions[trivia.currentTopic].length === 0){
			// 			alert("out of questions.  Sorry")
			// 		}
			// 		else {
			// 			trivia.timer = 10;
			// 			trivia.nextQuestion();
			// 		}
			// 	}
			// },

			// perSecond: function() {
			// 	for (var i = 10; i>=1; i--) {
			// 		if (trivia.timer===0){
			// 			//find a way to break this all
			// 		}
			// 		else {
			// 			trivia.printTime()
			// 			setTimeout(trivia.clock, 1000*i);
			// 		}
			// 	}
			// },

			// printTime: function() {
			// 	$('#timer').text(trivia.timer)
			// },
		}

		//activating scripts
		$("#vg").on("click", function() {
			trivia.currentTopic = 0;
			trivia.nextQuestion();
			//trivia.startTimer
		});
		$("#ot").on("click", function() {
			trivia.currentTopic = 1;
			trivia.nextQuestion()
			//trivia.startTimer
		});
		$('#answer1').on("click", function(event) {
			var answer = $('#answer1').text();
			trivia.checkAnswer(answer);
		});
		$('#answer2').on("click", function(event) {
			var answer = $('#answer2').text();
			trivia.checkAnswer(answer)
		});
		$('#answer3').on("click", function(event) {
			var answer = $('#answer3').text();
			trivia.checkAnswer(answer)
		});
		$('#answer4').on("click", function(event) {
			var answer = $('#answer4').text();
			trivia.checkAnswer(answer)
		});
	</script>
</body>
</html>